# HamsterApp

## Содержание

1. [Описание](#Описание)
2. [Идея](#Идея)
3. [ТЗ](#ТЗ)
4. [Реализация](#Реализация)
5. [Версии](#Версии)
6. [Сборка](#Сборка)
7. [Скриншоты](#Скриншоты)

## Описание

Вторая версия приложения, полностью переделанная на Kivy.

## Идея

Для работы на кране, необходимо приложение для подсчёта поднятых материалов, с таймером, отсчитывающим время с
последнего подъёма, а так же с историей и возможностью экспортировать её в гугл-таблицы

## ТЗ

- Сделать вместо PWA приложения, полноценный APK
- Приложение должно работать без интернета
- Приложение должно хранить результаты других дней
- Должна быть возможность экспортировать в гуглтаблицу записи, которых там нет
- Приложение должно отображать 10 последних дней

## Реализация

Для реализации приложение было переписано с использованием библиотек `Kivy`, `KivyMD`, `gspread`

## Версии

Первая версия на библиотеке `Flet` находится в
ветке [first-version](https://github.com/proDreams/HamsterApp/tree/first-version)

## Сборка

1. Для работы с гугл-таблицами, в корне папки необходимо создать файл `key.json` содержащий в себе данные для доступа к
   Google API, следующего формата:
   ```json
   {
     "type": "service_account",
     "project_id": "...",
     "private_key_id": "...",
     "private_key": "...",
     "client_email": "...",
     "client_id": "...",
     "auth_uri": "https://accounts.google.com/o/oauth2/auth",
     "token_uri": "https://oauth2.googleapis.com/token",
     "auth_provider_x509_cert_url": "https://www.googleapis.com/oauth2/v1/certs",
     "client_x509_cert_url": "..."
   }
   ```
2. Для сборки приложения, потребуется установленный Linux или виртуальная машина
3. Установка `Buildozer`
   ```python
   pip install --user buildozer
   ```
4. Проверка установки
   ```shell
   `which buildozer`
   # Если нет результата, необходимо в конец файла ~/.bashrc добавить строку export PATH=~/.local/bin/:$PATH
   nano ~/.bashrc
   export PATH=~/.local/bin/:$PATH
   # Затем выполнить
   ~/.bashrc 
   ```
5. Далее необходимо перейти в папку с проектом и инициализировать `Buildozer`
   ```shell
   buildozer init
   ```
   После этого будет создан файл `buildozer.spec`, его необходимо настроить под себя
   **Важно! Файл, настроенный на сборку данного проекта присутствует в репозитории!**
6. Затем запускаем команду и идём варить пельмени
   ```shell
   buildozer android debug
   ```
7. Когда сборка будет закончена, в папке `bin` будет находиться `apk` файл.

## Скриншоты

### Основной экран

![main screen](img/main.png)

### Экран истории

![history screen](img/history.png)